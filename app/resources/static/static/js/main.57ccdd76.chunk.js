(this["webpackJsonp@smartapp/feature-smartapp"]=this["webpackJsonp@smartapp/feature-smartapp"]||[]).push([[0],{117:function(e,t,a){},119:function(e,t,a){},120:function(e,t,a){},123:function(e,t,a){},124:function(e,t,a){},130:function(e,t,a){},131:function(e,t,a){},132:function(e,t,a){},133:function(e,t,a){},134:function(e,t,a){},135:function(e,t,a){},137:function(e,t,a){},138:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),l=a(44),o=a.n(l),r=a(10),s=a(41),i=a(4),d=(a(117),a(1));function u(){return Object(d.jsx)("div",{className:"main-loader",children:Object(d.jsxs)("div",{className:"main-loader__spinner",children:[Object(d.jsx)("div",{}),Object(d.jsx)("div",{}),Object(d.jsx)("div",{}),Object(d.jsx)("div",{})]})})}a(119);var O=a(21);const b=Object(O.a)([e=>e.bot.features],(e=>e)),j=Object(O.a)([e=>e.bot.response],(e=>e));var m=a(11),h=a(30);let E=function(e){return e.SMARTAPP_RPC="smartapp_rpc",e.NOTIFICATION="notification",e.OPEN_SMARTAPP_META="open_smart_app_meta",e}({}),p=function(e){return e.ECHO="echo",e.UPDATE_APP_COUNTER="update_app_counter",e.SEND_NOTIFICATION="send_notification",e.ECHO_FILE="echo_file",e.ECHO_FILES="echo_files",e.SEARCH_USERS="search_users",e}({}),_=function(e){return e.ADD_CONTACT="add_contact",e.CREATE_PERSONAL_CHAT="create_personal_chat",e.SEND_MESSAGE="send_message",e.GET_CONTACT="get_contact",e.OPEN_SMARTAPP="open_smart_app",e.OPEN_CLIENT_SETTINGS="open_client_settings",e.GET_CHATS="get_chats",e.SEARCH_CORPORATE_PHONEBOOK="search_corporate_phonebook",e.OPEN_GROUP_CHAT="open_group_chat",e.SEND_BOT_COMMAND="send_bot_command",e}({}),f=function(e){return e.ADD_CONTACT="Add Contact",e.CREATE_PERSONAL_CHAT="Create Personal Chat",e.SEND_MESSAGE="Send Message to Group Chat or User",e.GET_CONTACT="Get Contact",e.OPEN_SMARTAPP="Open SmartApp",e.OPEN_CLIENT_SETTINGS="Open Client Settings",e.GET_CHATS="Get Chats",e.SEARCH_CORPORATE_PHONEBOOK="Search Corporate Phonebook",e.OPEN_GROUP_CHAT="Open Group Chat",e.SEND_BOT_COMMAND="Send Bot Command",e}({}),v=function(e){return e.READY="ready",e.UPLOAD_FILE="upload_file",e.UPLOAD_FILES="upload_files",e}({}),S=function(e){return e.TEXT="text",e.COUNT="count",e.DELAY="delay",e.FILE="file",e.FILES="files",e.HUIDS="huids",e.PHONE="phone",e.NAME="name",e.HUID="huid",e.SMARTAPP_ID="appId",e.MESSAGE="message",e.GROUP_CHAT_ID="groupChatId",e.USER_HUID="userHuid",e.FILTER="filter",e.BODY="body",e.DATA="data",e}({}),N=function(e){return e.TEXT="Text",e.COUNT="Count",e.DELAY="Delay",e.FILE="File",e.FILES="Files",e.HUIDS="Huids",e.PHONE="Phone",e.NAME="Name",e.HUID="Huid",e.SMARTAPP_ID="Smartapp ID",e.MESSAGE="Message",e.GROUP_CHAT_ID="Group chat id",e.USER_HUID="User huid",e.FILTER="Filter",e.BODY="Body",e.DATA="Data",e}({}),T=function(e){return e.INPUT_TEXT="INPUT_TEXT",e.INPUT_NUMBER="INPUT_NUMBER",e.FILE_PICKER="FILE_PICKER",e.ARRAY_UUID="ARRAY_UUID",e.UUID="UUID",e}({});a(120);const x={method:"notification",name:"Express Notification"},C={name:"Open Smart App Meta",method:"open_smart_app",field:"openSmartAppMeta"},g={name:"Open File",method:"open_file"},A={name:"Request Geolocation",method:"request_geolocation"},y={name:"Scan QR",method:"scan_qr"},I={name:"Open Web Page",method:"open-web-page"},P={method:"menu",params:{text:"menu"}},R={INPUT_TEXT:"text",INPUT_NUMBER:"number",FILE_PICKER:"file",ARRAY_UUID:"text",UUID:"text"},U=[{method:_.ADD_CONTACT,name:f.ADD_CONTACT,uiElements:[{id:S.PHONE,label:N.PHONE,type:T.INPUT_TEXT},{id:S.NAME,label:N.NAME,type:T.INPUT_TEXT}]},{method:_.CREATE_PERSONAL_CHAT,name:f.CREATE_PERSONAL_CHAT,uiElements:[{id:S.HUID,label:N.HUID,type:T.UUID}]},{method:_.GET_CONTACT,name:f.GET_CONTACT,uiElements:[{id:S.PHONE,label:N.PHONE,type:T.INPUT_TEXT}]},{method:_.OPEN_SMARTAPP,name:f.OPEN_SMARTAPP,uiElements:[{id:S.SMARTAPP_ID,label:N.SMARTAPP_ID,type:T.INPUT_TEXT}]},{method:_.SEND_MESSAGE,name:f.SEND_MESSAGE,uiElements:[{id:S.MESSAGE,label:N.MESSAGE,type:T.INPUT_TEXT},{id:S.GROUP_CHAT_ID,label:N.GROUP_CHAT_ID,type:T.UUID},{id:S.USER_HUID,label:N.USER_HUID,type:T.UUID}]},{method:_.OPEN_CLIENT_SETTINGS,name:f.OPEN_CLIENT_SETTINGS,uiElements:[]},{method:_.GET_CHATS,name:f.GET_CHATS,uiElements:[{id:S.FILTER,label:N.FILTER,type:T.INPUT_TEXT}]},{method:_.SEARCH_CORPORATE_PHONEBOOK,name:f.SEARCH_CORPORATE_PHONEBOOK,uiElements:[{id:S.FILTER,label:N.FILTER,type:T.INPUT_TEXT}]},{method:_.OPEN_GROUP_CHAT,name:f.OPEN_GROUP_CHAT,uiElements:[{id:S.GROUP_CHAT_ID,label:N.GROUP_CHAT_ID,type:T.UUID}]},{method:_.SEND_BOT_COMMAND,name:f.SEND_BOT_COMMAND,uiElements:[{id:S.USER_HUID,label:N.USER_HUID,type:T.UUID},{id:S.BODY,label:N.BODY,type:T.INPUT_TEXT},{id:S.DATA,label:N.DATA,type:T.INPUT_TEXT}]}];var D=a(74),H=a(79),w=a(77),L=a(75);const F=e=>null===e||void 0===e?void 0:e.reduce(((e,t)=>(e[t.id]=void 0,e)),{}),M=e=>{if(e){let t=Object(H.a)(e);return Object(L.a)(t,"EEEE d LLLL y - H:mm",{locale:w.a})}};var G=a(150);const k="LOAD_FEATURES",B="LOAD_FEATURES_SUCCESS",V="RESET_RESPONSE",X="SEND_FEATURE_BOT_EVENT",z="SEND_FEATURE_BOT_EVENT_SUCCESS",q=Object(G.a)(k,(()=>{})),Y=Object(G.a)(B,(e=>e)),J=Object(G.a)(V,(()=>{})),K=Object(G.a)(X,(e=>e)),W=Object(G.a)(z,(e=>e));var Q;function Z(){return Z=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Z.apply(this,arguments)}function $(e,t){let{title:a,titleId:c,...l}=e;return n.createElement("svg",Z({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",ref:t,"aria-labelledby":c},l),a?n.createElement("title",{id:c},a):null,Q||(Q=n.createElement("path",{fillRule:"evenodd",d:"M13 11V4h-2v7H4v2h7v7h2v-7h7v-2h-7z"})))}const ee=n.forwardRef($);var te;a.p;function ae(){return ae=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},ae.apply(this,arguments)}function ne(e,t){let{title:a,titleId:c,...l}=e;return n.createElement("svg",ae({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",ref:t,"aria-labelledby":c},l),a?n.createElement("title",{id:c},a):null,te||(te=n.createElement("path",{fill:"currentColor",d:"M13 11V3h-2v8H3v2h8v8h2v-8h8v-2h-8z",transform:"rotate(45 12 12)"})))}const ce=n.forwardRef(ne);var le;a.p;function oe(){return oe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},oe.apply(this,arguments)}function re(e,t){let{title:a,titleId:c,...l}=e;return n.createElement("svg",oe({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 22 26",ref:t,"aria-labelledby":c},l),a?n.createElement("title",{id:c},a):null,le||(le=n.createElement("g",{fill:"none",fillRule:"evenodd",transform:"translate(-1)"},n.createElement("path",{fill:"#595959",d:"M5 0C3.73 0 2.44 1.225 2.5 2.407V22.63c-.06 1.784 1.23 3.007 2.5 2.89h15c1.71.117 3-1.106 3-2.89V6.26L16 0H5zm0 24.556c-.298-.117-1.298-.59-1.5-1.445V2.41C3.702 2.148 4.702 1.2 5 .963h10.5v3.852c.01 1.467.903 2.315 2 1.926H22v15.89c-.262.864-.76 1.81-2 1.928H5z"}),n.createElement("rect",{width:18.5,height:9.148,x:1,y:12.519,fill:"#5C5C5C",rx:2}),n.createElement("text",{fill:"#FFF",fontSize:5.5,fontWeight:600},n.createElement("tspan",{x:4.302,y:19},"\n        FILE\n      ")))))}const se=n.forwardRef(re);a.p;var ie,de=a(65),ue=a.n(de);function Oe(){return Oe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Oe.apply(this,arguments)}function be(e,t){let{title:a,titleId:c,...l}=e;return n.createElement("svg",Oe({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",ref:t,"aria-labelledby":c},l),a?n.createElement("title",{id:c},a):null,ie||(ie=n.createElement("path",{fill:"currentColor",d:"M10.667.667h-8c-.734 0-1.334.6-1.334 1.333v9.333h1.334V2h8V.667zm2 2.666H5.333C4.6 3.333 4 3.933 4 4.667V14c0 .733.6 1.333 1.333 1.333h7.334c.733 0 1.333-.6 1.333-1.333V4.667c0-.734-.6-1.334-1.333-1.334zm0 10.667H5.333V4.667h7.334V14z"})))}const je=n.forwardRef(be);a.p;var me=a(66),he=a.n(me);a(122),a(123);function Ee(e){const t=Object(n.useRef)(null);return Object(n.useEffect)((()=>{const a=new he.a(t.current,{mode:"view",enableTransform:!0});e.json&&a.set(e.json);const n=document.createElement("button");n.className="copy-to-clipboard",n.innerHTML=ue.a.renderToStaticMarkup(Object(d.jsx)(je,{height:"22",width:"22"})),n.addEventListener("click",(()=>(e=>{const t=document.createElement("textarea");t.innerHTML=JSON.stringify(e,null,"  "),document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)})(e.json))),n.setAttribute("title","Copy To Clipboard");const c=document.querySelector(".jsoneditor-menu"),l=document.querySelector(".jsoneditor-menu .jsoneditor-search");return c.insertBefore(n,l),()=>a.destroy()}),[e.json]),Object(d.jsx)("div",{className:"json-viewer",ref:t})}var pe=a(27),_e=a.n(pe);const fe="UPLOAD_FILE",ve="UPLOAD_FILE_SUCCESS",Se="UPLOAD_FILES",Ne="UPLOAD_FILES_SUCCESS",Te="REMOVE_FILE_SUCCESS",xe="RESET_ATTACHMENTS",Ce="SEND_EXPRESS_EVENT",ge="SEND_MESSAGE_EXPRESS_EVENT",Ae="SEND_EXPRESS_EVENT_SUCCESS",ye="SET_NOTIFICATION_SUCCESS",Ie="RESET_EXPRESS_NOTIFICATION_SUCCESS",Pe="RESET_EXPRESS_RESPONSE",Re="SEND_EXPRESS_READY_EVENT",Ue="SET_META",De="REQUEST_GEOLOCATION",He="SET_GEOLOCATION",we=Object(G.a)(fe,(function(){return{type:arguments.length>0&&void 0!==arguments[0]?arguments[0]:""}})),Le=Object(G.a)(ve,(e=>e)),Fe=Object(G.a)(Se,(function(){return{type:arguments.length>0&&void 0!==arguments[0]?arguments[0]:""}})),Me=Object(G.a)(Ne,(e=>e)),Ge=(Object(G.a)("REMOVE_FILE",(e=>e)),Object(G.a)(Te,(e=>e))),ke=Object(G.a)(xe,(()=>{})),Be=Object(G.a)(Ce,(e=>e)),Ve=Object(G.a)(ge,(e=>e)),Xe=Object(G.a)(Ae,(e=>e)),ze=Object(G.a)(ye,(e=>e)),qe=Object(G.a)(Ie,(()=>{})),Ye=Object(G.a)(Ue,(e=>e)),Je=Object(G.a)(He,(e=>e)),Ke=Object(G.a)(De),We=Object(G.a)(Pe,(()=>{})),Qe=Object(G.a)(Re,(()=>{})),Ze=Object(O.a)([e=>e.client.attachments],(e=>e)),$e=Object(O.a)([e=>e.client.response],(e=>e)),et=Object(O.a)([e=>e.client.meta],(e=>e)),tt=Object(O.a)([e=>e.client.geolocation],(e=>e)),at=Object(O.a)([e=>e.client.notifications],(e=>e));var nt,ct=a(73);function lt(){return lt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},lt.apply(this,arguments)}function ot(e,t){let{title:a,titleId:c,...l}=e;return n.createElement("svg",lt({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",ref:t,"aria-labelledby":c},l),a?n.createElement("title",{id:c},a):null,nt||(nt=n.createElement("path",{d:"M7.828 11l5.586-5.586L12 4l-8 8 8 8 1.414-1.414L7.828 13H20v-2z"})))}const rt=n.forwardRef(ot);a.p,a(124);function st(e){let{name:t}=e;return Object(d.jsxs)("div",{className:"feature-page__header",children:[Object(d.jsx)(h.a,{className:"btn--arrow-left",to:"/",children:Object(d.jsx)(rt,{className:"icon--arrow-left",height:24,width:24})}),Object(d.jsx)("div",{className:"feature-page__info",children:Object(d.jsxs)("span",{className:"feature-page__title",children:[t," method"]})})]})}function it(e){var t,a,c,l,o,s,u;let{name:O,method:b,uiElements:m=[]}=e;const h=Object(r.d)(),E=Object(r.e)(j),f=Object(r.e)($e),v=Object(r.e)(Ze),[x,C]=Object(n.useState)([]),[g,A]=Object(n.useState)(""),[y,I]=Object(n.useState)(!1),P=b===p.SEARCH_USERS,U=[p.ECHO_FILE,p.ECHO_FILES].includes(b),H=p.SEARCH_USERS===b,w=Object.values(_).includes(b),L=/iPhone|iPad|iPod|Android/i.test(window.navigator.userAgent),M=Object(n.useMemo)((()=>e=>Object.values(e).filter((e=>e))),[]),G=()=>I(!y),k=Object(D.a)({initialValues:F(x),onSubmit:e=>{w?(async e=>{switch(b){case _.SEND_MESSAGE:if(!M(e).length)return;const{userHuid:t,groupChatId:a,message:n}=e,c=()=>h(Ve({userHuid:t,groupChatId:a,messageBody:n,messageMeta:{}}));L?c():(null===i.a||void 0===i.a||i.a.disableRenameParams(),c(),null===i.a||void 0===i.a||i.a.enableRenameParams());break;case _.OPEN_CLIENT_SETTINGS:Object(i.c)();break;case _.GET_CHATS:const l=await Object(i.b)({filter:(null===e||void 0===e?void 0:e.filter)||null});h(Xe(l));break;case _.OPEN_GROUP_CHAT:{if(!M(e).length)return;const t=()=>Object(i.d)({groupChatId:null===e||void 0===e?void 0:e.groupChatId});L?t():(null===i.a||void 0===i.a||i.a.disableRenameParams(),t(),null===i.a||void 0===i.a||i.a.enableRenameParams());break}case _.SEARCH_CORPORATE_PHONEBOOK:{const t=await Object(i.g)({filter:(null===e||void 0===e?void 0:e.filter)||null});h(Xe(t));break}case _.SEND_BOT_COMMAND:{const t=async()=>Object(i.h)({userHuid:null===e||void 0===e?void 0:e.userHuid,data:null!==e&&void 0!==e&&e.data?{command:null===e||void 0===e?void 0:e.data}:null,body:null===e||void 0===e?void 0:e.body});let a;L?a=await t():(null===i.a||void 0===i.a||i.a.disableRenameParams(),a=await t(),null===i.a||void 0===i.a||i.a.enableRenameParams()),h(Xe(a));break}default:if(!M(e).length)return;const o={method:b,params:e},r=()=>h(Be(o));L?r():(null===i.a||void 0===i.a||i.a.disableRenameParams(),r(),null===i.a||void 0===i.a||i.a.enableRenameParams())}})(e):(e=>{const t=M(e);if(!t.length)return;h(K({method:b,params:H?{huids:t}:e}))})(e)}}),B=()=>b!==_.GET_CHATS&&(U?!(null!==v&&void 0!==v&&v.length):!Object.values(k.values).filter((e=>e)).length);return Object(n.useEffect)((()=>{const e=m.map(((e,t)=>({...e,id:e.id.includes(S.HUIDS)?"".concat(e.id).concat(t):e.id})));return C(e),()=>{h(J()),h(ke()),h(We())}}),[m,h]),Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("div",{className:"feature-page",children:[Object(d.jsx)(st,{name:O}),U?Object(d.jsxs)("div",{className:"feature-page__form",children:[Object(d.jsx)("span",{className:"feature-page__title",children:b===p.ECHO_FILE?N.FILE:N.FILES}),Object(d.jsx)("button",{className:"btn--attach",onClick:()=>{b===p.ECHO_FILE?h(we()):b===p.ECHO_FILES&&h(Fe())},children:b===p.ECHO_FILE?"Attach file":"Attach files"}),!(null===v||void 0===v||!v.length)&&Object(d.jsx)("div",{className:"attachments",children:v.map((e=>Object(d.jsxs)("span",{className:"attachments__item",children:[Object(d.jsx)("span",{children:e.fileName}),Object(d.jsx)(ce,{width:20,height:20,className:"btn--remove-attachment",onClick:()=>{return t=e.fileId,h(Ge(t)),void(1===(null===v||void 0===v?void 0:v.length)&&h(W(null)));var t}})]},e.fileId)))}),Object(d.jsx)("div",{className:"form-buttons",children:Object(d.jsx)("button",{className:_e()({"btn--submit":!0,"btn--submit-disabled":B()}),onClick:()=>{if(v){h(K({method:b,params:{},files:v}))}},disabled:B(),type:"button",children:"Submit"})})]}):!(null===x||void 0===x||!x.length)&&Object(d.jsxs)("form",{className:"feature-page__form",onSubmit:k.handleSubmit,children:[x.map(((e,t)=>{let{id:a,type:n,label:c}=e;const l=R[n],o=!H||0===t;return Object(d.jsxs)("div",{children:[o&&Object(d.jsx)("span",{className:"feature-page__title",children:c}),Object(d.jsx)("input",{className:_e()({input:!0,"input--error":(()=>{const e=k.values[a];return H||n===T.UUID?e&&(c=k.values[a],!/[0-9a-fA-F-]{36}/.test(c)):a===S.PHONE?e&&(t=k.values[a],!/(^8|7|\+7)((\d{10})|(\s\(\d{3}\)\s\d{3}\s\d{2}\s\d{2}))/.test(t)):void 0;var t,c})()}),onChange:k.handleChange,value:k.values[a]||"",type:l,multiple:a===S.FILES,id:a,min:0}),l===R.INPUT_TEXT&&k.values[a]&&Object(d.jsx)(ce,{className:"btn--clear-input",onClick:()=>{k.setFieldValue(a,""),g&&A("")},height:20,width:20})]},a)})),Object(d.jsxs)("div",{className:"form-buttons",children:[Object(d.jsx)("button",{className:_e()({"btn--submit":!0,"btn--submit-disabled":B()}),disabled:B(),type:"submit",children:"Submit"}),P&&Object(d.jsx)(ee,{title:"Add new input",className:"btn--plus",onClick:()=>{const e=x[x.length-1],{id:t}=e,a={...e,id:t.includes(S.HUIDS)?"".concat(t).concat(x.length):t};C((e=>[...e,a]))},height:24,width:24})]})]})]}),E&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("div",{className:"response-markdown",children:Object(d.jsx)(ct.a,{children:b===p.ECHO?"text: "+(null===(t=(null===E||void 0===E||null===(c=E.payload)||void 0===c?void 0:c.result).text)||void 0===t||null===(a=t.replaceAll)||void 0===a?void 0:a.call(t,"\n","\n\r"))||!1:null===E||void 0===E||null===(l=E.payload)||void 0===l||null===(o=l.result)||void 0===o||null===(s=o.replaceAll)||void 0===s?void 0:s.call(o,"\n","\n\r")})}),b===p.ECHO_FILES&&Object(d.jsxs)("div",{className:"response-files",children:["Files:",null===E||void 0===E||null===(u=E.files)||void 0===u?void 0:u.map((()=>Object(d.jsx)(se,{className:"response-files__file",height:20,width:20})))]}),E&&Object(d.jsxs)("div",{children:[Object(d.jsxs)("div",{className:"response-markdown-form",children:[Object(d.jsx)("input",{checked:y,className:"form-toggler__input",id:"form-toggler",type:"checkbox",onChange:G}),Object(d.jsx)("span",{className:"form-toggler",onClick:G,children:"Show JSON Viewer"})]}),y&&Object(d.jsx)("div",{className:"response-json",children:Object(d.jsx)(Ee,{height:24,json:E})})]})]}),f&&Object(d.jsx)("div",{className:"response-express",children:JSON.stringify(null===f||void 0===f?void 0:f.payload,null,2)})]})}a(130);const dt=Object(O.a)([e=>e.ui.topLoader],(e=>e)),ut=Object(O.a)([e=>e.ui.mainLoader],(e=>e)),Ot=Object(O.a)([e=>e.ui.redirectPath],(e=>e));function bt(){const e=Object(r.e)(dt),[t,a]=Object(n.useState)(!1),[c,l]=Object(n.useState)(!1),[o,s]=Object(n.useState)(!1),i=Object(n.useRef)(null),u=Object(n.useRef)(null);return Object(n.useEffect)((()=>{e&&!t&&a(!0),!e&&t&&(a(!1),l(!0),i.current=setTimeout((()=>{s(!0),u.current=setTimeout((()=>{l(!1),s(!1)}),100)}),200))}),[e,t]),Object(n.useEffect)((()=>()=>{i.current&&clearTimeout(i.current),u.current&&clearTimeout(u.current)}),[]),Object(d.jsx)("div",{className:_e()({"top-loader":!0,"top-loader--enabled":t&&!o}),children:Object(d.jsx)("div",{className:_e()({"top-loader__bar":!0,"top-loader__bar--start":t,"top-loader__bar--stop":c,"top-loader__bar--finish":o})})})}var jt;function mt(){return mt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},mt.apply(this,arguments)}function ht(e,t){let{title:a,titleId:c,...l}=e;return n.createElement("svg",mt({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 12 12",ref:t,"aria-labelledby":c},l),a?n.createElement("title",{id:c},a):null,jt||(jt=n.createElement("g",{fill:"currentColor",fillRule:"nonzero"},n.createElement("path",{d:"M1.379 7.017v2.775h-.55A.816.816 0 0 1 0 8.989V7.427c0-.443.371-.803.829-.803h.566c-.01.13-.016.261-.016.393zm9.792-.393c.458 0 .829.36.829.803V8.99a.816.816 0 0 1-.829.803h-.55V7.017c0-.132-.006-.263-.016-.393h.566zM10.047 9.873v-2.82c0-.132-.006-.263-.018-.393C9.857 4.651 8.377 3.043 6.5 2.8h-.997c-1.88.244-3.36 1.853-3.532 3.863-.01.129-.017.26-.017.392v4.754h8.094V9.873zm-5.998-.66c-.608 0-1.101-.522-1.101-1.167 0-.644.493-1.166 1.1-1.166.609 0 1.102.522 1.102 1.166 0 .645-.493 1.167-1.101 1.167zm2.96-1.167c0-.644.493-1.166 1.1-1.166.609 0 1.102.522 1.102 1.166 0 .645-.493 1.167-1.101 1.167s-1.101-.522-1.101-1.167z"}))))}const Et=n.forwardRef(ht);a.p,a(131);function pt(){const e=Object(r.d)(),t=Object(r.e)(at);return Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("div",{className:"feature-page",children:[Object(d.jsx)(st,{name:x.name}),Object(d.jsx)("div",{className:"feature-page__notifications",children:t.length?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("div",{className:"notifications__clear-button",onClick:()=>{e(qe())},title:"Clear notifications",children:"Clear"}),t.map(((e,t)=>Object(d.jsx)("div",{className:"notifications__item",children:JSON.stringify(null===e||void 0===e?void 0:e.data,null,2)},t)))]}):Object(d.jsx)("div",{className:"feature-page__notifications-placeholder",children:"New notifications will appear here..."})})]})})}const _t="SET_TOP_LOADER",ft="SET_MAIN_LOADER",vt="SET_REDIRECT_PATH",St=Object(G.a)(_t,(e=>e)),Nt=Object(G.a)(ft,(e=>e)),Tt=Object(G.a)(vt,(e=>e));function xt(){const e=Object(r.d)(),t=Object(r.e)(et);return Object(n.useEffect)((()=>()=>{e(Tt("")),e(Ye(null))}),[e]),Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("div",{className:"feature-page",children:[Object(d.jsx)(st,{name:C.name}),t&&Object(d.jsx)("div",{className:"response-express",children:JSON.stringify(t.payload,null,2)})]})})}var Ct=a(18);const gt=Object(Ct.a)();var At=a(76);a(132);function yt(e){let{onScanSuccess:t,onScanFailure:a}=e;const c=Object(n.useRef)({fps:10,qrbox:250,disableFlip:!0});return Object(n.useEffect)((()=>(new At.a("reader",c.current,!1).render(t,a),()=>{})),[]),Object(d.jsx)("div",{id:"reader"})}function It(){const[e,t]=Object(n.useState)(null),[a,c]=Object(n.useState)(null),[l,o]=Object(n.useState)(null);return Object(d.jsxs)("div",{className:"feature-page",children:[Object(d.jsx)(st,{name:y.name}),Object(d.jsx)(yt,{onScanSuccess:(e,a)=>{t(e),c(a),o(null),console.log("Code matched: ".concat(e),a)},onScanFailure:e=>{o(e),console.warn("Code scan error: ".concat(e))}}),e&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("p",{children:"Decoded text:"}),Object(d.jsx)("div",{children:e})]}),a&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("p",{children:"Decoded result:"}),Object(d.jsx)("div",{children:JSON.stringify(a)})]}),l&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("p",{children:"Error:"}),Object(d.jsx)("div",{children:l})]})]})}function Pt(){const[e,t]=Object(n.useState)("");return Object(d.jsxs)("div",{className:"feature-page",children:[Object(d.jsx)(st,{name:g.name}),Object(d.jsx)("input",{className:_e()({input:!0}),onChange:e=>t(e.target.value),value:e,type:"text"}),Object(d.jsx)("div",{className:"form-buttons",children:Object(d.jsx)("button",{className:_e()({"btn--submit":!0,"btn--submit-disabled":!e}),disabled:!e,type:"submit",onClick:()=>{e&&(console.error({inputValue:JSON.parse(e)}),null===i.a||void 0===i.a||i.a.sendClientEvent({method:g.method,params:JSON.parse(e)}))},children:"Submit"})})]})}a(133);function Rt(){const[e,t]=Object(n.useState)("https://www.tutorialrepublic.com/");return Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("div",{className:"feature-page",children:[Object(d.jsx)(st,{name:I.name}),Object(d.jsxs)("div",{className:"open-web-page",children:[Object(d.jsx)("input",{className:"open-web-page__input",type:"url",defaultValue:e,onChange:e=>{const{value:a}=e.target;a&&t(a)}}),Object(d.jsx)("a",{className:"open-web-page__link",href:e,children:e})]})]})})}a(134);var Ut=function(){const e=Object(r.d)(),t=Object(r.e)(tt);return Object(n.useLayoutEffect)((()=>{e(Je(null))}),[e]),Object(d.jsxs)("div",{className:"feature-page",children:[Object(d.jsx)(st,{name:A.name}),Object(d.jsxs)("div",{className:"request-geolocation",children:[Object(d.jsx)("p",{className:"request-geolocation__title",children:"\u041a\u043e\u043e\u0440\u0434\u0438\u043d\u0430\u0442\u044b"}),Object(d.jsxs)("div",{className:"request-geolocation__info",children:[Object(d.jsx)("div",{className:"request-geolocation__info--latitude-longitude",children:null===t||void 0===t?void 0:t.latitude}),Object(d.jsx)("div",{className:"request-geolocation__info--latitude-longitude",children:null===t||void 0===t?void 0:t.longitude}),Object(d.jsx)("button",{onClick:()=>{e(Ke())},className:"request-geolocation__info--button",children:"\u041e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c"})]}),Object(d.jsx)("div",{className:"request-geolocation__timestamp",children:M(null===t||void 0===t?void 0:t.timestamp)})]})]})};function Dt(){const e=Object(r.d)(),t=Object(r.e)(b),a=Object(r.e)(Ot),{platform:c}=Object(i.j)();return Object(n.useEffect)((()=>{t||e(q())}),[e,t]),Object(n.useEffect)((()=>{a&&gt.push(a)}),[e,a]),Object(d.jsxs)("div",{className:"feature-smartapp",children:[Object(d.jsx)("div",{className:"header",children:Object(d.jsxs)("span",{className:"header__content",children:[Object(d.jsx)(Et,{className:"header__icon",height:20,width:20}),Object(d.jsx)("span",{className:"header__text",children:"Feature Smartapp"})]})}),Object(d.jsx)(bt,{}),Object(d.jsx)("section",{className:"feature-smartapp__menu",children:Object(d.jsxs)(m.c,{children:[null===t||void 0===t?void 0:t.map((e=>Object(d.jsx)(m.a,{path:"/".concat(e.method),children:Object(d.jsx)(it,{...e})},"".concat(e.method,"-route")))),U.map((e=>Object(d.jsx)(m.a,{path:"/".concat(e.method),children:Object(d.jsx)(it,{...e})},"".concat(e.method,"-route")))),Object(d.jsx)(m.a,{path:"/".concat(C.method),children:Object(d.jsx)(xt,{})},"".concat(C.method,"-route")),Object(d.jsx)(m.a,{path:"/".concat(x.method),children:Object(d.jsx)(pt,{})},"".concat(x.method,"-route")),Object(d.jsx)(m.a,{path:"/".concat(y.method),children:Object(d.jsx)(It,{})},"".concat(y.method,"-route")),Object(d.jsx)(m.a,{path:"/".concat(g.method),children:Object(d.jsx)(Pt,{})},"".concat(g.method,"-route")),Object(d.jsx)(m.a,{path:"/".concat(I.method),children:Object(d.jsx)(Rt,{})},"".concat(I.method,"-route")),Object(d.jsx)(m.a,{path:"/".concat(A.method),children:Object(d.jsx)(Ut,{})},"".concat(A.method,"-route")),Object(d.jsxs)(m.a,{path:"/",children:[null===t||void 0===t?void 0:t.map((e=>Object(d.jsx)(h.a,{className:"menu-item",to:"/".concat(e.method),children:e.name},"".concat(e.method,"-link")))),U.map((e=>e.method===_.OPEN_CLIENT_SETTINGS?Object(d.jsx)("div",{className:"menu-item",onClick:()=>{"web"!==c?Object(i.c)():alert("Feature is unavailable on web client")},children:e.name}):Object(d.jsx)(h.a,{className:"menu-item",to:"/".concat(e.method),children:e.name},"".concat(e.method,"-link")))),Object(d.jsx)(h.a,{className:"menu-item",to:"/".concat(x.method),children:x.name},"".concat(x.method,"-link")),Object(d.jsx)(h.a,{className:"menu-item",to:"/".concat(y.method),children:y.name},"".concat(y.method,"-link")),Object(d.jsx)(h.a,{className:"menu-item",to:"/".concat(I.method),children:I.name},"".concat(I.method,"-link")),Object(d.jsx)(h.a,{className:"menu-item",to:"/".concat(A.method),children:A.name},"".concat(A.method,"-link"))]})]})})]})}a(135);function Ht(e){let{result:t,status:a}=e;return Object(d.jsxs)("div",{className:"notifier",children:[Object(d.jsx)("span",{className:"notifier__text",children:t}),Object(d.jsxs)("span",{className:"notifier__text",children:["Status: ",a]})]})}function wt(){const e=Object(r.d)(),[t,a]=Object(n.useState)(!0),c=Object(r.e)(ut),[l,o]=Object(n.useState)(null);return Object(n.useEffect)((()=>{t&&(a(!1),e(Qe())),null===i.a||void 0===i.a||i.a.onReceive((t=>{let{type:a,payload:n}=t;if("object"===typeof n)switch(a){case E.SMARTAPP_RPC:o(n),setTimeout((()=>o(null)),3e3);break;case E.NOTIFICATION:e(ze(n));break;default:console.error({type:a,payload:n})}}))}),[e,t]),Object(d.jsxs)(d.Fragment,{children:[c&&Object(d.jsx)(u,{}),Object(d.jsx)(Dt,{}),l&&Object(d.jsx)(Ht,{...l})]})}var Lt=a(33),Ft=a(58),Mt=a(71),Gt=a(78),kt=a(149);const Bt={[_t]:(e,t)=>{let{payload:a}=t;return{...e,topLoader:a}},[ft]:(e,t)=>{let{payload:a}=t;return{...e,mainLoader:a}},[vt]:(e,t)=>{let{payload:a}=t;return{...e,redirectPath:a}}},Vt=Object(kt.a)(Bt,{topLoader:!1,mainLoader:!1,redirectPath:""}),Xt={[B]:(e,t)=>{let{payload:a}=t;return{...e,features:a}},[z]:(e,t)=>{let{payload:a}=t;return{...e,response:a}},[V]:e=>({...e,response:null})},zt=Object(kt.a)(Xt,{features:null,response:null,notifications:null}),qt={[ve]:(e,t)=>{let{payload:a}=t;return{...e,attachments:[a]}},[Ne]:(e,t)=>{let{payload:a}=t;return{...e,attachments:[...a]}},[Te]:(e,t)=>{let{payload:a}=t;return{...e,attachments:e.attachments.filter((e=>e.fileId!==a))}},[xe]:e=>({...e,attachments:null}),[ye]:(e,t)=>{let{payload:a}=t;return{...e,notifications:[a,...e.notifications]}},[Ie]:e=>({...e,notifications:[]}),[Ae]:(e,t)=>({...e,response:t}),[Pe]:e=>({...e,response:null}),[Ue]:(e,t)=>{let{payload:a}=t;return{...e,meta:a}},[He]:(e,t)=>{let{payload:a}=t;return{...e,geolocation:a}}},Yt=Object(kt.a)(qt,{attachments:null,response:null,meta:null,notifications:[],geolocation:null}),Jt=Object(Lt.combineReducers)({ui:Vt,bot:zt,client:Yt,router:Object(s.b)(gt)});var Kt=a(9);function*Wt(){try{yield Object(Kt.b)(Nt(!0));const e=yield i.a.sendBotEvent(P);e&&(yield Object(Kt.b)(Y(e.payload.result)))}catch(e){console.error("loadFeaturesSaga error",e)}finally{yield Object(Kt.b)(Nt(!1))}}function*Qt(e){try{yield Object(Kt.b)(Nt(!0));const t=yield null===i.a||void 0===i.a?void 0:i.a.sendBotEvent(e.payload);yield Object(Kt.b)(W(t))}catch(t){console.error("sendFeatureBotEventSaga error",t)}finally{yield Object(Kt.b)(Nt(!1))}}function Zt(e){let{payload:{type:t}}=e;return function*(){try{var e;const a=yield null===i.a||void 0===i.a?void 0:i.a.sendClientEvent({method:v.UPLOAD_FILE,params:{type:t}});if(null===(e=a.payload)||void 0===e||!e.record)return;const n={...a.payload.record};yield Object(Kt.b)(Le(n))}catch(a){console.error("uploadFileSaga error: ".concat(a))}}()}function $t(e){let{payload:{type:t}}=e;return function*(){try{const e=yield null===i.a||void 0===i.a?void 0:i.a.sendClientEvent({method:v.UPLOAD_FILES,params:{type:t}});if(!e.payload.records.length)return;const a=e.payload.records;yield Object(Kt.b)(Me(a))}catch(e){console.error("uploadFilesSaga error: ".concat(e))}}()}function*ea(){try{var e;yield Object(Kt.b)(St(!0));const t=yield Object(i.f)(),a=null===t||void 0===t||null===(e=t.payload)||void 0===e?void 0:e.result;a&&(yield Object(Kt.b)(Je(a)))}catch(t){console.error("uploadFileSaga error: ".concat(t))}finally{yield Object(Kt.b)(St(!1))}}function*ta(e){try{yield Object(Kt.b)(St(!0));const t=yield null===i.a||void 0===i.a?void 0:i.a.sendClientEvent(e.payload);yield Object(Kt.b)(Xe(t))}catch(t){console.error("sendExpressEventSaga error",t)}finally{yield Object(Kt.b)(St(!1))}}function*aa(e){try{yield Object(Kt.b)(St(!0));const t=yield Object(i.i)(e.payload);yield Object(Kt.b)(Xe(t))}catch(t){console.error("sendMessageExpressEventSaga error",t)}finally{yield Object(Kt.b)(St(!1))}}function*na(){try{var e;const a=yield Object(i.e)(300);var t;if(null===a||void 0===a||null===(e=a.payload)||void 0===e?void 0:e[C.field])null===i.a||void 0===i.a||null===(t=i.a.log)||void 0===t||t.call(i.a,{response:a}),yield Object(Kt.b)(Tt("/".concat(C.method))),yield Object(Kt.b)(Ye(a));else Tt("/")}catch(a){console.error("sendExpressReadyEventSaga",a)}}var ca=function*(){yield Object(Kt.a)([Object(Kt.c)(k,Wt),Object(Kt.c)(X,Qt),Object(Kt.c)(Ce,ta),Object(Kt.c)(ge,aa),Object(Kt.c)(Re,na),Object(Kt.c)(fe,Zt),Object(Kt.c)(Se,$t),Object(Kt.c)(De,ea)])};a(137);o.a.render(Object(d.jsx)(c.a.StrictMode,{children:Object(d.jsx)(r.a,{store:function(){const e=Object(Gt.a)(),t=Object(Ft.a)(gt),a=Object(Lt.createStore)(Jt,void 0,Object(Mt.composeWithDevTools)(Object(Lt.applyMiddleware)(e,t)));return e.run(ca).toPromise().catch((e=>console.error("Saga error",e))),a}(),children:Object(d.jsx)(s.a,{history:gt,children:Object(d.jsx)(wt,{})})})}),document.getElementById("root"))}},[[138,1,2]]]);
//# sourceMappingURL=main.57ccdd76.chunk.js.map