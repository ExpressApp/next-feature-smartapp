(this["webpackJsonp@smartapp/feature-smartapp"]=this["webpackJsonp@smartapp/feature-smartapp"]||[]).push([[0],{100:function(e,t,n){},102:function(e,t,n){},103:function(e,t,n){},106:function(e,t,n){},107:function(e,t,n){},113:function(e,t,n){},114:function(e,t,n){},115:function(e,t,n){},117:function(e,t,n){},118:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),l=n(35),r=n.n(l),s=n(7),i=n(31),o=n(10),d=(n(100),n(19));const u=Object(d.a)([e=>e.ui.topLoader],(e=>e)),j=Object(d.a)([e=>e.ui.mainLoader],(e=>e)),b=Object(d.a)([e=>e.ui.redirectPath],(e=>e));var O=n(1);function m(){return Object(s.e)(j)?Object(O.jsx)("div",{className:"main-loader",children:Object(O.jsxs)("div",{className:"main-loader__spinner",children:[Object(O.jsx)("div",{}),Object(O.jsx)("div",{}),Object(O.jsx)("div",{}),Object(O.jsx)("div",{})]})}):null}n(102);const p=Object(d.a)([e=>e.bot.features],(e=>e)),h=Object(d.a)([e=>e.bot.response],(e=>e));var E=n(8),f=n(29);let v,_,N,S,T,x,y,A;!function(e){e.SMARTAPP_RPC="smartapp_rpc",e.NOTIFICATION="notification",e.OPEN_SMARTAPP_META="open_smart_app_meta"}(v||(v={})),function(e){e.ECHO="echo",e.UPDATE_APP_COUNTER="update_app_counter",e.SEND_NOTIFICATION="send_notification",e.ECHO_FILE="echo_file",e.ECHO_FILES="echo_files",e.SEARCH_USERS="search_users"}(_||(_={})),function(e){e.ADD_CONTACT="add_contact",e.CREATE_PERSONAL_CHAT="create_personal_chat",e.GET_CONTACT="get_contact",e.OPEN_SMARTAPP="open_smart_app"}(N||(N={})),function(e){e.ADD_CONTACT="Add contact",e.CREATE_PERSONAL_CHAT="Create personal chat",e.GET_CONTACT="Get contact",e.OPEN_SMARTAPP="Open SmartApp"}(S||(S={})),function(e){e.READY="ready",e.UPLOAD_FILE="upload_file",e.UPLOAD_FILES="upload_files"}(T||(T={})),function(e){e.TEXT="text",e.COUNT="count",e.DELAY="delay",e.FILE="file",e.FILES="files",e.HUIDS="huids",e.PHONE="phone",e.NAME="name",e.HUID="huid",e.SMARTAPP_ID="appId"}(x||(x={})),function(e){e.TEXT="Text",e.COUNT="Count",e.DELAY="Delay",e.FILE="File",e.FILES="Files",e.HUIDS="Huids",e.PHONE="Phone",e.NAME="Name",e.HUID="Huid",e.SMARTAPP_ID="Smartapp ID"}(y||(y={})),function(e){e.INPUT_TEXT="INPUT_TEXT",e.INPUT_NUMBER="INPUT_NUMBER",e.FILE_PICKER="FILE_PICKER",e.ARRAY_UUID="ARRAY_UUID",e.UUID="UUID"}(A||(A={}));n(103);const C="notification",g="Express Notification",I="Open Smart App Meta",P="open_smart_app_meta",R={method:"menu",params:{text:"menu"}},w={INPUT_TEXT:"text",INPUT_NUMBER:"number",FILE_PICKER:"file",ARRAY_UUID:"text",UUID:"text"},U=[{method:N.ADD_CONTACT,name:S.ADD_CONTACT,uiElements:[{id:x.PHONE,label:y.PHONE,type:A.INPUT_TEXT},{id:x.NAME,label:y.NAME,type:A.INPUT_TEXT}]},{method:N.CREATE_PERSONAL_CHAT,name:S.CREATE_PERSONAL_CHAT,uiElements:[{id:x.HUID,label:y.HUID,type:A.UUID}]},{method:N.GET_CONTACT,name:S.GET_CONTACT,uiElements:[{id:x.PHONE,label:y.PHONE,type:A.INPUT_TEXT}]},{method:N.OPEN_SMARTAPP,name:S.OPEN_SMARTAPP,uiElements:[{id:x.SMARTAPP_ID,label:y.SMARTAPP_ID,type:A.INPUT_TEXT}]}];var L=n(64);const D=e=>null===e||void 0===e?void 0:e.reduce(((e,t)=>(e[t.id]=void 0,e)),{});var F=n(124);const H="LOAD_FEATURES",M="LOAD_FEATURES_SUCCESS",V="RESET_RESPONSE",k="SEND_FEATURE_BOT_EVENT",B="SEND_FEATURE_BOT_EVENT_SUCCESS",z=Object(F.a)(H,(()=>{})),X=Object(F.a)(M,(e=>e)),J=Object(F.a)(V,(()=>{})),Y=Object(F.a)(k,(e=>e)),G=Object(F.a)(B,(e=>e));var K;function q(){return q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},q.apply(this,arguments)}function W(e,t){let{title:n,titleId:c,...l}=e;return a.createElement("svg",q({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",ref:t,"aria-labelledby":c},l),n?a.createElement("title",{id:c},n):null,K||(K=a.createElement("path",{fillRule:"evenodd",d:"M13 11V4h-2v7H4v2h7v7h2v-7h7v-2h-7z"})))}const Q=a.forwardRef(W);var Z;n.p;function $(){return $=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},$.apply(this,arguments)}function ee(e,t){let{title:n,titleId:c,...l}=e;return a.createElement("svg",$({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",ref:t,"aria-labelledby":c},l),n?a.createElement("title",{id:c},n):null,Z||(Z=a.createElement("path",{fill:"currentColor",d:"M13 11V3h-2v8H3v2h8v8h2v-8h8v-2h-8z",transform:"rotate(45 12 12)"})))}const te=a.forwardRef(ee);var ne;n.p;function ae(){return ae=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ae.apply(this,arguments)}function ce(e,t){let{title:n,titleId:c,...l}=e;return a.createElement("svg",ae({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 22 26",ref:t,"aria-labelledby":c},l),n?a.createElement("title",{id:c},n):null,ne||(ne=a.createElement("g",{fill:"none",fillRule:"evenodd",transform:"translate(-1)"},a.createElement("path",{fill:"#595959",d:"M5 0C3.73 0 2.44 1.225 2.5 2.407V22.63c-.06 1.784 1.23 3.007 2.5 2.89h15c1.71.117 3-1.106 3-2.89V6.26L16 0H5zm0 24.556c-.298-.117-1.298-.59-1.5-1.445V2.41C3.702 2.148 4.702 1.2 5 .963h10.5v3.852c.01 1.467.903 2.315 2 1.926H22v15.89c-.262.864-.76 1.81-2 1.928H5z"}),a.createElement("rect",{width:18.5,height:9.148,x:1,y:12.519,fill:"#5C5C5C",rx:2}),a.createElement("text",{fill:"#FFF",fontSize:5.5,fontWeight:600},a.createElement("tspan",{x:4.302,y:19},"\n        FILE\n      ")))))}const le=a.forwardRef(ce);n.p;var re,se=n(56),ie=n.n(se);function oe(){return oe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},oe.apply(this,arguments)}function de(e,t){let{title:n,titleId:c,...l}=e;return a.createElement("svg",oe({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",ref:t,"aria-labelledby":c},l),n?a.createElement("title",{id:c},n):null,re||(re=a.createElement("path",{fill:"currentColor",d:"M10.667.667h-8c-.734 0-1.334.6-1.334 1.333v9.333h1.334V2h8V.667zm2 2.666H5.333C4.6 3.333 4 3.933 4 4.667V14c0 .733.6 1.333 1.333 1.333h7.334c.733 0 1.333-.6 1.333-1.333V4.667c0-.734-.6-1.334-1.333-1.334zm0 10.667H5.333V4.667h7.334V14z"})))}const ue=a.forwardRef(de);n.p;var je=n(57),be=n.n(je);n(105),n(106);function Oe(e){const t=Object(a.useRef)(null);return Object(a.useEffect)((()=>{const n=new be.a(t.current,{mode:"view",enableTransform:!0});e.json&&n.set(e.json);const a=document.createElement("button");a.className="copy-to-clipboard",a.innerHTML=ie.a.renderToStaticMarkup(Object(O.jsx)(ue,{height:"22",width:"22"})),a.addEventListener("click",(()=>(e=>{const t=document.createElement("textarea");t.innerHTML=JSON.stringify(e,null,"  "),document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)})(e.json))),a.setAttribute("title","Copy To Clipboard");const c=document.querySelector(".jsoneditor-menu"),l=document.querySelector(".jsoneditor-menu .jsoneditor-search");return c.insertBefore(a,l),()=>n.destroy()}),[e.json]),Object(O.jsx)("div",{className:"json-viewer",ref:t})}var me=n(27),pe=n.n(me);const he="UPLOAD_FILE",Ee="UPLOAD_FILE_SUCCESS",fe="UPLOAD_FILES",ve="UPLOAD_FILES_SUCCESS",_e="REMOVE_FILE_SUCCESS",Ne="RESET_ATTACHMENTS",Se="SEND_EXPRESS_EVENT",Te="SEND_EXPRESS_EVENT_SUCCESS",xe="SET_NOTIFICATION_SUCCESS",ye="RESET_EXPRESS_NOTIFICATION_SUCCESS",Ae="RESET_EXPRESS_RESPONSE",Ce="SEND_EXPRESS_READY_EVENT",ge="SET_META",Ie=Object(F.a)(he,(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return{type:e}})),Pe=Object(F.a)(Ee,(e=>e)),Re=Object(F.a)(fe,(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return{type:e}})),we=Object(F.a)(ve,(e=>e)),Ue=(Object(F.a)("REMOVE_FILE",(e=>e)),Object(F.a)(_e,(e=>e))),Le=Object(F.a)(Ne,(()=>{})),De=Object(F.a)(Se,(e=>e)),Fe=Object(F.a)(Te,(e=>e)),He=Object(F.a)(xe,(e=>e)),Me=Object(F.a)(ye,(()=>{})),Ve=Object(F.a)(ge,(e=>e)),ke=Object(F.a)(Ae,(()=>{})),Be=Object(F.a)(Ce,(()=>{})),ze=Object(d.a)([e=>e.client.attachments],(e=>e)),Xe=Object(d.a)([e=>e.client.response],(e=>e)),Je=Object(d.a)([e=>e.client.meta],(e=>e)),Ye=Object(d.a)([e=>e.client.notifications],(e=>e));var Ge,Ke=n(63);function qe(){return qe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},qe.apply(this,arguments)}function We(e,t){let{title:n,titleId:c,...l}=e;return a.createElement("svg",qe({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",ref:t,"aria-labelledby":c},l),n?a.createElement("title",{id:c},n):null,Ge||(Ge=a.createElement("path",{d:"M7.828 11l5.586-5.586L12 4l-8 8 8 8 1.414-1.414L7.828 13H20v-2z"})))}const Qe=a.forwardRef(We);n.p,n(107);function Ze(e){let{name:t}=e;return Object(O.jsxs)("div",{className:"feature-page__header",children:[Object(O.jsx)(f.a,{className:"btn--arrow-left",to:"/",children:Object(O.jsx)(Qe,{className:"icon--arrow-left",height:24,width:24})}),Object(O.jsx)("div",{className:"feature-page__info",children:Object(O.jsxs)("span",{className:"feature-page__title",children:[t," method"]})})]})}function $e(e){var t,n,c;let{name:l,method:r,uiElements:i=[]}=e;const o=Object(s.d)(),d=Object(s.e)(h),u=Object(s.e)(Xe),j=Object(s.e)(ze),[b,m]=Object(a.useState)([]),[p,E]=Object(a.useState)(""),[f,v]=Object(a.useState)(!1),S=r===_.SEARCH_USERS,T=[_.ECHO_FILE,_.ECHO_FILES].includes(r),C=_.SEARCH_USERS===r,g=[N.ADD_CONTACT,N.CREATE_PERSONAL_CHAT,N.GET_CONTACT,N.OPEN_SMARTAPP].includes(r),I=()=>v(!f),P=Object(L.a)({initialValues:D(b),onSubmit:e=>{const t=Object.values(e).filter((e=>e));t.length&&o(g?De({method:r,params:e}):Y({method:r,params:C?{huids:t}:e}))}}),R=()=>T?!(null!==j&&void 0!==j&&j.length):!Object.values(P.values).filter((e=>e)).length;return Object(a.useEffect)((()=>{const e=i.map(((e,t)=>({...e,id:e.id.includes(x.HUIDS)?"".concat(e.id).concat(t):e.id})));return m(e),()=>{o(J()),o(Le()),o(ke())}}),[i,o]),Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("div",{className:"feature-page",children:[Object(O.jsx)(Ze,{name:l}),T?Object(O.jsxs)("div",{className:"feature-page__form",children:[Object(O.jsx)("span",{className:"feature-page__title",children:r===_.ECHO_FILE?y.FILE:y.FILES}),Object(O.jsx)("button",{className:"btn--attach",onClick:()=>{r===_.ECHO_FILE?o(Ie()):r===_.ECHO_FILES&&o(Re())},children:r===_.ECHO_FILE?"Attach file":"Attach files"}),!(null===j||void 0===j||!j.length)&&Object(O.jsx)("div",{className:"attachments",children:j.map((e=>Object(O.jsxs)("span",{className:"attachments__item",children:[Object(O.jsx)("span",{children:e.fileName}),Object(O.jsx)(te,{width:20,height:20,className:"btn--remove-attachment",onClick:()=>{return t=e.fileId,o(Ue(t)),void(1===(null===j||void 0===j?void 0:j.length)&&o(G(null)));var t}})]},e.fileId)))}),Object(O.jsx)("div",{className:"form-buttons",children:Object(O.jsx)("button",{className:pe()({"btn--submit":!0,"btn--submit-disabled":R()}),onClick:()=>{if(j){o(Y({method:r,params:{},files:j}))}},disabled:R(),type:"button",children:"Submit"})})]}):Object(O.jsxs)("form",{className:"feature-page__form",onSubmit:P.handleSubmit,children:[b.map(((e,t)=>{let{id:n,type:a,label:c}=e;const l=w[a],r=!C||0===t;return Object(O.jsxs)("div",{children:[r&&Object(O.jsx)("span",{className:"feature-page__title",children:c}),Object(O.jsx)("input",{className:pe()({input:!0,"input--error":(()=>{const e=P.values[n];return C||a===A.UUID?e&&(c=P.values[n],!/[0-9a-fA-F-]{36}/.test(c)):n===x.PHONE?e&&(t=P.values[n],!/(^8|7|\+7)((\d{10})|(\s\(\d{3}\)\s\d{3}\s\d{2}\s\d{2}))/.test(t)):void 0;var t,c})()}),onChange:P.handleChange,value:P.values[n]||"",type:l,multiple:n===x.FILES,id:n,min:0}),"text"===l&&P.values[n]&&Object(O.jsx)(te,{className:"btn--clear-input",onClick:()=>{P.setFieldValue(n,""),p&&E("")},height:20,width:20})]},n)})),Object(O.jsxs)("div",{className:"form-buttons",children:[Object(O.jsx)("button",{className:pe()({"btn--submit":!0,"btn--submit-disabled":R()}),disabled:R(),type:"submit",children:"Submit"}),S&&Object(O.jsx)(Q,{title:"Add new input",className:"btn--plus",onClick:()=>{const e=b[b.length-1],{id:t}=e,n={...e,id:t.includes(x.HUIDS)?"".concat(t).concat(b.length):t};m((e=>[...e,n]))},height:24,width:24})]})]})]}),d&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("div",{className:"response-markdown",children:Object(O.jsx)(Ke.a,{children:null===d||void 0===d||null===(t=d.payload)||void 0===t||null===(n=t.result)||void 0===n?void 0:n.replaceAll("\n","\n\r")})}),r===_.ECHO_FILES&&Object(O.jsxs)("div",{className:"response-files",children:["Files:",null===d||void 0===d||null===(c=d.files)||void 0===c?void 0:c.map((()=>Object(O.jsx)(le,{className:"response-files__file",height:20,width:20})))]}),d&&Object(O.jsxs)("div",{children:[Object(O.jsxs)("div",{className:"response-markdown-form",children:[Object(O.jsx)("input",{checked:f,className:"form-toggler__input",id:"form-toggler",type:"checkbox",onChange:I}),Object(O.jsx)("span",{className:"form-toggler",onClick:I,children:"Show JSON Viewer"})]}),f&&Object(O.jsx)("div",{className:"response-json",children:Object(O.jsx)(Oe,{height:24,json:d})})]})]}),u&&Object(O.jsx)("div",{className:"response-express",children:JSON.stringify(null===u||void 0===u?void 0:u.payload,null,2)})]})}var et;n(113);function tt(){const e=Object(s.e)(u),[t,n]=Object(a.useState)(!1),[c,l]=Object(a.useState)(!1),[r,i]=Object(a.useState)(!1),o=Object(a.useRef)(null),d=Object(a.useRef)(null);return Object(a.useEffect)((()=>{e&&!t&&n(!0),!e&&t&&(n(!1),l(!0),o.current=setTimeout((()=>{i(!0),d.current=setTimeout((()=>{l(!1),i(!1)}),100)}),200))}),[e,t]),Object(a.useEffect)((()=>()=>{o.current&&clearTimeout(o.current),d.current&&clearTimeout(d.current)}),[]),Object(O.jsx)("div",{className:pe()({"top-loader":!0,"top-loader--enabled":t&&!r}),children:Object(O.jsx)("div",{className:pe()({"top-loader__bar":!0,"top-loader__bar--start":t,"top-loader__bar--stop":c,"top-loader__bar--finish":r})})})}function nt(){return nt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},nt.apply(this,arguments)}function at(e,t){let{title:n,titleId:c,...l}=e;return a.createElement("svg",nt({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 12 12",ref:t,"aria-labelledby":c},l),n?a.createElement("title",{id:c},n):null,et||(et=a.createElement("g",{fill:"currentColor",fillRule:"nonzero"},a.createElement("path",{d:"M1.379 7.017v2.775h-.55A.816.816 0 0 1 0 8.989V7.427c0-.443.371-.803.829-.803h.566c-.01.13-.016.261-.016.393zm9.792-.393c.458 0 .829.36.829.803V8.99a.816.816 0 0 1-.829.803h-.55V7.017c0-.132-.006-.263-.016-.393h.566zM10.047 9.873v-2.82c0-.132-.006-.263-.018-.393C9.857 4.651 8.377 3.043 6.5 2.8h-.997c-1.88.244-3.36 1.853-3.532 3.863-.01.129-.017.26-.017.392v4.754h8.094V9.873zm-5.998-.66c-.608 0-1.101-.522-1.101-1.167 0-.644.493-1.166 1.1-1.166.609 0 1.102.522 1.102 1.166 0 .645-.493 1.167-1.101 1.167zm2.96-1.167c0-.644.493-1.166 1.1-1.166.609 0 1.102.522 1.102 1.166 0 .645-.493 1.167-1.101 1.167s-1.101-.522-1.101-1.167z"}))))}const ct=a.forwardRef(at);n.p,n(114);function lt(){const e=Object(s.d)(),t=Object(s.e)(Ye);return Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)("div",{className:"feature-page",children:[Object(O.jsx)(Ze,{name:g}),Object(O.jsx)("div",{className:"feature-page__notifications",children:t.length?Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("div",{className:"notifications__clear-button",onClick:()=>{e(Me())},title:"Clear notifications",children:"Clear"}),t.map(((e,t)=>Object(O.jsx)("div",{className:"notifications__item",children:JSON.stringify(null===e||void 0===e?void 0:e.data,null,2)},t)))]}):Object(O.jsx)("div",{className:"feature-page__notifications-placeholder",children:"New notifications will appear here..."})})]})})}const rt="SET_TOP_LOADER",st="SET_REDIRECT_PATH",it=Object(F.a)(rt,(e=>e)),ot=Object(F.a)(Te,(e=>e)),dt=Object(F.a)(st,(e=>e));function ut(){const e=Object(s.d)(),t=Object(s.e)(Je);return Object(a.useEffect)((()=>()=>{e(dt("")),e(Ve(null))}),[e]),Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)("div",{className:"feature-page",children:[Object(O.jsx)(Ze,{name:I}),t&&Object(O.jsx)("div",{className:"response-express",children:JSON.stringify(null===t||void 0===t?void 0:t.payload,null,2)})]})})}var jt=n(14);const bt=Object(jt.a)();function Ot(){const e=Object(s.d)(),t=Object(s.e)(p),n=Object(s.e)(b);return Object(a.useEffect)((()=>{t||e(z())}),[e,t]),Object(a.useEffect)((()=>{n&&bt.push(n)}),[e,n]),Object(O.jsxs)("div",{className:"feature-smartapp",children:[Object(O.jsx)("div",{className:"header",children:Object(O.jsxs)("span",{className:"header__content",children:[Object(O.jsx)(ct,{className:"header__icon",height:20,width:20}),Object(O.jsx)("span",{className:"header__text",children:"Feature Smartapp"})]})}),Object(O.jsx)(tt,{}),Object(O.jsx)("section",{className:"feature-smartapp__menu",children:Object(O.jsxs)(E.c,{children:[null===t||void 0===t?void 0:t.map((e=>Object(O.jsx)(E.a,{path:"/".concat(e.method),children:Object(O.jsx)($e,{...e})},"".concat(e.method,"-route")))),U.map((e=>Object(O.jsx)(E.a,{path:"/".concat(e.method),children:Object(O.jsx)($e,{...e})},"".concat(e.method,"-route")))),Object(O.jsx)(E.a,{path:"/".concat(P),children:Object(O.jsx)(ut,{})},"".concat(P,"-route")),Object(O.jsx)(E.a,{path:"/".concat(C),children:Object(O.jsx)(lt,{})},"".concat(C,"-route")),Object(O.jsxs)(E.a,{path:"/",children:[null===t||void 0===t?void 0:t.map((e=>Object(O.jsx)(f.a,{className:"menu-item",to:"/".concat(e.method),children:e.name},"".concat(e.method,"-link")))),t&&U.map((e=>Object(O.jsx)(f.a,{className:"menu-item",to:"/".concat(e.method),children:e.name},"".concat(e.method,"-link")))),t&&Object(O.jsx)(f.a,{className:"menu-item",to:"/".concat(C),children:g},"".concat(C,"-link"))]})]})})]})}n(115);function mt(e){let{result:t,status:n}=e;return Object(O.jsxs)("div",{className:"notifier",children:[Object(O.jsx)("span",{className:"notifier__text",children:t}),Object(O.jsxs)("span",{className:"notifier__text",children:["Status: ",n]})]})}function pt(){const e=Object(s.d)(),[t,n]=Object(a.useState)(!0),[c,l]=Object(a.useState)(null);return Object(a.useEffect)((()=>{t&&(n(!1),e(Be())),null===o.a||void 0===o.a||o.a.onReceive((t=>{let{type:n,payload:a}=t;if("object"===typeof a)switch(n){case v.SMARTAPP_RPC:l(a),setTimeout((()=>l(null)),3e3);break;case v.NOTIFICATION:e(He(a))}}))}),[e,t]),Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(m,{}),Object(O.jsx)(Ot,{}),c&&Object(O.jsx)(mt,{...c})]})}var ht=n(23),Et=n(49),ft=n(61),vt=n(65),_t=n(123);const Nt={[rt]:(e,t)=>{let{payload:n}=t;return{...e,topLoader:n}},SET_MAIN_LOADER:(e,t)=>{let{payload:n}=t;return{...e,mainLoader:n}},[st]:(e,t)=>{let{payload:n}=t;return{...e,redirectPath:n}}},St=Object(_t.a)(Nt,{topLoader:!1,mainLoader:!1,redirectPath:""}),Tt={[M]:(e,t)=>{let{payload:n}=t;return{...e,features:n}},[B]:(e,t)=>{let{payload:n}=t;return{...e,response:n}},[V]:e=>({...e,response:null})},xt=Object(_t.a)(Tt,{features:null,response:null,notifications:null}),yt={[Ee]:(e,t)=>{let{payload:n}=t;return{...e,attachments:[n]}},[ve]:(e,t)=>{let{payload:n}=t;return{...e,attachments:[...n]}},[_e]:(e,t)=>{let{payload:n}=t;return{...e,attachments:e.attachments.filter((e=>e.fileId!==n))}},[Ne]:e=>({...e,attachments:null}),[xe]:(e,t)=>{let{payload:n}=t;return{...e,notifications:[n,...e.notifications]}},[ye]:e=>({...e,notifications:[]}),[Te]:(e,t)=>{let{payload:n}=t;return{...e,response:n}},[Ae]:e=>({...e,response:null}),[ge]:(e,t)=>{let{payload:n}=t;return{...e,meta:n}}},At=Object(_t.a)(yt,{attachments:null,response:null,meta:null,notifications:[]}),Ct=Object(ht.combineReducers)({ui:St,bot:xt,client:At,router:Object(i.b)(bt)});var gt=n(9);function*It(){try{yield Object(gt.b)(ot(!0));const e=yield o.a.sendBotEvent(R);e&&(yield Object(gt.b)(X(e.payload.result)))}catch(e){console.error("loadFeaturesSaga error",e)}finally{yield Object(gt.b)(ot(!1))}}function*Pt(e){try{yield Object(gt.b)(it(!0));const t=yield null===o.a||void 0===o.a?void 0:o.a.sendBotEvent(e.payload);yield Object(gt.b)(G(t))}catch(t){console.error("sendFeatureBotEventSaga error",t)}finally{yield Object(gt.b)(it(!1))}}function*Rt(e){let{payload:{type:t}}=e;try{var n;const e=yield null===o.a||void 0===o.a?void 0:o.a.sendClientEvent({method:T.UPLOAD_FILE,params:{type:t}});if(null===(n=e.payload)||void 0===n||!n.record)return;const a={...e.payload.record};yield Object(gt.b)(Pe(a))}catch(a){console.error("uploadFileSaga error: ".concat(a))}}function*wt(e){let{payload:{type:t}}=e;try{const e=yield null===o.a||void 0===o.a?void 0:o.a.sendClientEvent({method:T.UPLOAD_FILES,params:{type:t}});if(!e.payload.records.length)return;const n=e.payload.records;yield Object(gt.b)(we(n))}catch(n){console.error("uploadFilesSaga error: ".concat(n))}}function*Ut(e){try{yield Object(gt.b)(it(!0));const t=yield null===o.a||void 0===o.a?void 0:o.a.sendClientEvent({...e.payload});console.error({response:t}),yield Object(gt.b)(Fe(t))}catch(t){console.error("sendExpressEventSaga error",t)}finally{yield Object(gt.b)(it(!1))}}function*Lt(){try{var e,t,n;const a=P,c=yield null===o.a||void 0===o.a?void 0:o.a.sendClientEvent({method:T.READY,params:{},timeout:300});console.log("sendExpressReadyEvent response",JSON.stringify(c,null,2)),(null===c||void 0===c?void 0:c.type)===a||(null===c||void 0===c||null===(e=c.payload)||void 0===e?void 0:e.type)===a||(null===c||void 0===c||null===(t=c.payload)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.type)===a?(yield Object(gt.b)(dt("/".concat(P))),yield Object(gt.b)(Ve(c))):dt("/")}catch(a){console.error("sendExpressReadyEventSaga",a)}}var Dt=function*(){yield Object(gt.a)([Object(gt.c)(H,It),Object(gt.c)(k,Pt),Object(gt.c)(Se,Ut),Object(gt.c)(Ce,Lt),Object(gt.c)(he,Rt),Object(gt.c)(fe,wt)])};n(117);r.a.render(Object(O.jsx)(c.a.StrictMode,{children:Object(O.jsx)(s.a,{store:function(){const e=Object(vt.a)(),t=Object(Et.a)(bt),n=Object(ht.createStore)(Ct,void 0,Object(ft.composeWithDevTools)(Object(ht.applyMiddleware)(e,t)));return e.run(Dt).toPromise().catch((e=>console.error("Saga error",e))),n}(),children:Object(O.jsx)(i.a,{history:bt,children:Object(O.jsx)(pt,{})})})}),document.getElementById("root"))}},[[118,1,2]]]);
//# sourceMappingURL=main.6174356d.chunk.js.map